!function(t,e,o,n){function i(e,o){this.element=e, this.options=t.extend({},s,o), this._defaults=s, this._name=r, this.init()}var r="stellar",s={scrollProperty:"scroll",positionProperty:"position",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(t){t.hide()},showElement:function(t){t.show()}},l={scroll:{getLeft:function(t){return t.scrollLeft()},setLeft:function(t,e){t.scrollLeft(e)},getTop:function(t){return t.scrollTop()},setTop:function(t,e){t.scrollTop(e)}},position:{getLeft:function(t){return-1*parseInt(t.css("left"),10)},getTop:function(t){return-1*parseInt(t.css("top"),10)}},margin:{getLeft:function(t){return-1*parseInt(t.css("margin-left"),10)},getTop:function(t){return-1*parseInt(t.css("margin-top"),10)}},transform:{getLeft:function(t){var e=getComputedStyle(t[0])[f];return"none"!==e?-1*parseInt(e.match(/(-?[0-9]+)/g)[4],10):0},getTop:function(t){var e=getComputedStyle(t[0])[f];return"none"!==e?-1*parseInt(e.match(/(-?[0-9]+)/g)[5],10):0}}},a={position:{setLeft:function(t,e){t.css("left",e)},setTop:function(t,e){t.css("top",e)}},transform:{setPosition:function(t,e,o,n,i){t[0].style[f]="translate3d("+(e-o)+"px, "+(n-i)+"px, 0)"}}},c=function(){var e,o=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,n=t("script")[0].style,i="";for(e in n)if(o.test(e)){i=e.match(o)[0];break};return"WebkitOpacity" in n&&(i="Webkit"), "KhtmlOpacity" in n&&(i="Khtml"),
        function(t){return i+(i.length>0?t.charAt(0).toUpperCase()+t.slice(1):t)}}(),f=c("transform"),p=t("<div />",{style:"background:#fff"}).css("background-position-x")!==n,u=p?function(t,e,o){t.css({"background-position-x":e,"background-position-y":o})}:function(t,e,o){t.css("background-position",e+" "+o)},d=p?function(t){return[t.css("background-position-x"),t.css("background-position-y")]}:function(t){return t.css("background-position").split(" ")},g=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,16.666666666666668)};i.prototype={init:function(){this.options.name=r+"_"+Math.floor(1e9*Math.random()), this._defineElements(), this._defineGetters(), this._defineSetters(), this._handleWindowLoadAndResize(), this._detectViewport(), this.refresh({firstLoad:!0}), "scroll"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===o.body&&(this.element=e), this.$scrollElement=t(this.element), this.$element=this.element===e?t("body"):this.$scrollElement, this.$viewportElement=this.options.viewportElement!==n?t(this.options.viewportElement):this.$scrollElement[0]===e||"scroll"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var t=this,e=l[t.options.scrollProperty];this._getScrollLeft=function(){return e.getLeft(t.$scrollElement)}, this._getScrollTop=function(){return e.getTop(t.$scrollElement)}},_defineSetters:function(){var e=this,o=l[e.options.scrollProperty],n=a[e.options.positionProperty],i=o.setLeft,r=o.setTop;this._setScrollLeft="function"==typeof i?function(t){i(e.$scrollElement,t)}:t.noop, this._setScrollTop="function"==typeof r?function(t){r(e.$scrollElement,t)}:t.noop, this._setPosition=n.setPosition||function(t,o,i,r,s){e.options.horizontalScrolling&&n.setLeft(t,o,i), e.options.verticalScrolling&&n.setTop(t,r,s)}},_handleWindowLoadAndResize:function(){var o=this,n=t(e);o.options.responsive&&n.bind("load."+this.name,function(){o.refresh()}), n.bind("resize."+this.name,function(){o._detectViewport(), o.options.responsive&&o.refresh()})},refresh:function(o){var n=this,i=n._getScrollLeft(),r=n._getScrollTop();o&&o.firstLoad||this._reset(), this._setScrollLeft(0), this._setScrollTop(0), this._setOffsets(), this._findParticles(), this._findBackgrounds(), o&&o.firstLoad&&/WebKit/.test(navigator.userAgent)&&t(e).load(function(){var t=n._getScrollLeft(),e=n._getScrollTop();n._setScrollLeft(t+1), n._setScrollTop(e+1), n._setScrollLeft(t), n._setScrollTop(e)}), this._setScrollLeft(i), this._setScrollTop(r)},_detectViewport:function(){var t=this.$viewportElement.offset(),e=null!==t&&t!==n;this.viewportWidth=this.$viewportElement.width(), this.viewportHeight=this.$viewportElement.height(), this.viewportOffsetTop=e?t.top:0, this.viewportOffsetLeft=e?t.left:0},_findParticles:function(){if(this.particles!==n)for(var o=this.particles.length-1;o>=0;o--)this.particles[o].$element.data("stellar-elementIsActive",n);this.particles=[], this.options.parallaxElements&&this.$element.find("[data-stellar-ratio]").each(function(){var o,i,r,s,l,a,c,f,p,u=t(this),d=0,g=0,m=0,h=0;if(u.data("stellar-elementIsActive")){if(u.data("stellar-elementIsActive")!==this)return}else u.data("stellar-elementIsActive",this);e.options.showElement(u), u.data("stellar-startingLeft")?(u.css("left",u.data("stellar-startingLeft")), u.css("top",u.data("stellar-startingTop"))):(u.data("stellar-startingLeft",u.css("left")), u.data("stellar-startingTop",u.css("top"))), r=u.position().left, s=u.position().top, l="auto"===u.css("margin-left")?0:parseInt(u.css("margin-left"),10), a="auto"===u.css("margin-top")?0:parseInt(u.css("margin-top"),10), f=u.offset().left-l, p=u.offset().top-a, u.parents().each(function(){var e=t(this);return e.data("stellar-offset-parent")===!0?(d=m, g=h, c=e, !1):(m+=e.position().left, void(h+=e.position().top))}), o=u.data("stellar-horizontal-offset")!==n?u.data("stellar-horizontal-offset"):c!==n&&c.data("stellar-horizontal-offset")!==n?c.data("stellar-horizontal-offset"):e.horizontalOffset, i=u.data("stellar-vertical-offset")!==n?u.data("stellar-vertical-offset"):c!==n&&c.data("stellar-vertical-offset")!==n?c.data("stellar-vertical-offset"):e.verticalOffset, e.particles.push({$element:u,$offsetParent:c,isFixed:"fixed"===u.css("position"),horizontalOffset:o,verticalOffset:i,startingPositionLeft:r,startingPositionTop:s,startingOffsetLeft:f,startingOffsetTop:p,parentOffsetLeft:d,parentOffsetTop:g,stellarRatio:u.data("stellar-ratio")!==n?u.data("stellar-ratio"):1,width:u.outerWidth(!0),height:u.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var e,o=this,i=this._getScrollLeft(),r=this._getScrollTop();this.backgrounds=[], this.options.parallaxBackgrounds&&(e=this.$element.find("[data-stellar-background-ratio]"), this.$element.data("stellar-background-ratio")&&(e=e.add(this.$element)), e.each(function(){var e,s,l,a,c,f,p,g=t(this),m=d(g),h=0,v=0,_=0,L=0;if(g.data("stellar-backgroundIsActive")){if(g.data("stellar-backgroundIsActive")!==this)return}else g.data("stellar-backgroundIsActive",this);g.data("stellar-backgroundStartingLeft")?u(g,g.data("stellar-backgroundStartingLeft"),g.data("stellar-backgroundStartingTop")):(g.data("stellar-backgroundStartingLeft",m[0]), g.data("stellar-backgroundStartingTop",m[1])), l="auto"===g.css("margin-left")?0:parseInt(g.css("margin-left"),10), a="auto"===g.css("margin-top")?0:parseInt(g.css("margin-top"),10), c=g.offset().left-l-i, f=g.offset().top-a-r, g.parents().each(function(){var e=t(this);return e.data("stellar-offset-parent")===!0?(h=_, v=L, p=e, !1):(_+=e.position().left, void(L+=e.position().top))}), e=g.data("stellar-horizontal-offset")!==n?g.data("stellar-horizontal-offset"):p!==n&&p.data("stellar-horizontal-offset")!==n?p.data("stellar-horizontal-offset"):o.horizontalOffset, s=g.data("stellar-vertical-offset")!==n?g.data("stellar-vertical-offset"):p!==n&&p.data("stellar-vertical-offset")!==n?p.data("stellar-vertical-offset"):o.verticalOffset, o.backgrounds.push({$element:g,$offsetParent:p,isFixed:"fixed"===g.css("background-attachment"),horizontalOffset:e,verticalOffset:s,startingValueLeft:m[0],startingValueTop:m[1],startingBackgroundPositionLeft:isNaN(parseInt(m[0],10))?0:parseInt(m[0],10),startingBackgroundPositionTop:isNaN(parseInt(m[1],10))?0:parseInt(m[1],10),startingPositionLeft:g.position().left,startingPositionTop:g.position().top,startingOffsetLeft:c,startingOffsetTop:f,parentOffsetLeft:h,parentOffsetTop:v,stellarRatio:g.data("stellar-background-ratio")===n?1:g.data("stellar-background-ratio")})}))},_reset:function(){var t,e,o,n,i;for(i=this.particles.length-1;i>=0;i--)t=this.particles[i], e=t.$element.data("stellar-startingLeft"), o=t.$element.data("stellar-startingTop"), this._setPosition(t.$element,e,e,o,o), this.options.showElement(t.$element), t.$element.data("stellar-startingLeft",null).data("stellar-elementIsActive",null).data("stellar-backgroundIsActive",null);for(i=this.backgrounds.length-1;i>=0;i--)n=this.backgrounds[i], n.$element.data("stellar-backgroundStartingLeft",null).data("stellar-backgroundStartingTop",null), u(n.$element,n.startingValueLeft,n.startingValueTop)},destroy:function(){this._reset(), this.$scrollElement.unbind("resize."+this.name).unbind("scroll."+this.name), this._animationLoop=t.noop, t(e).unbind("load."+this.name).unbind("resize."+this.name)},_setOffsets:function(){var o=this,n=t(e);n.unbind("resize.horizontal-"+this.name).unbind("resize.vertical-"+this.name), "function"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(), n.bind("resize.horizontal-"+this.name,function(){o.horizontalOffset=o.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset, "function"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(), n.bind("resize.vertical-"+this.name,function(){o.verticalOffset=o.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var t,e,o,n,i,r,s,l,a,c,f=this._getScrollLeft(),p=this._getScrollTop(),d=!0,g=!0;if(this.currentScrollLeft!==f||this.currentScrollTop!==p||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=f, this.currentScrollTop=p, this.currentWidth=this.viewportWidth, this.currentHeight=this.viewportHeight, c=this.particles.length-1;c>=0;c--)t=this.particles[c], e=t.isFixed?1:0, this.options.horizontalScrolling?(r=(f+t.horizontalOffset+this.viewportOffsetLeft+t.startingPositionLeft-t.startingOffsetLeft+t.parentOffsetLeft)*-(t.stellarRatio+e-1)+t.startingPositionLeft, l=r-t.startingPositionLeft+t.startingOffsetLeft):(r=t.startingPositionLeft, l=t.startingOffsetLeft), this.options.verticalScrolling?(s=(p+t.verticalOffset+this.viewportOffsetTop+t.startingPositionTop-t.startingOffsetTop+t.parentOffsetTop)*-(t.stellarRatio+e-1)+t.startingPositionTop, a=s-t.startingPositionTop+t.startingOffsetTop):(s=t.startingPositionTop, a=t.startingOffsetTop), this.options.hideDistantElements&&(g=!this.options.horizontalScrolling||l+t.width>(t.isFixed?0:f)&&l<(t.isFixed?0:f)+this.viewportWidth+this.viewportOffsetLeft, d=!this.options.verticalScrolling||a+t.height>(t.isFixed?0:p)&&a<(t.isFixed?0:p)+this.viewportHeight+this.viewportOffsetTop), g&&d?(t.isHidden&&(this.options.showElement(t.$element), t.isHidden=!1), this._setPosition(t.$element,r,t.startingPositionLeft,s,t.startingPositionTop)):t.isHidden||(this.options.hideElement(t.$element), t.isHidden=!0);for(c=this.backgrounds.length-1;c>=0;c--)o=this.backgrounds[c], e=o.isFixed?0:1, n=this.options.horizontalScrolling?(f+o.horizontalOffset-this.viewportOffsetLeft-o.startingOffsetLeft+o.parentOffsetLeft-o.startingBackgroundPositionLeft)*(e-o.stellarRatio)+"px":o.startingValueLeft, i=this.options.verticalScrolling?(p+o.verticalOffset-this.viewportOffsetTop-o.startingOffsetTop+o.parentOffsetTop-o.startingBackgroundPositionTop)*(e-o.stellarRatio)+"px":o.startingValueTop, u(o.$element,n,i)}},_handleScrollEvent:function(){var t=this,e=!1,o=function(){t._repositionElements(), e=!1},n=function(){e||(g(o), e=!0)};this.$scrollElement.bind("scroll."+this.name,n), n()},_startAnimationLoop:function(){var t=this;this._animationLoop=function(){g(t._animationLoop), t._repositionElements()}, this._animationLoop()}}, t.fn[r]=function(e){var o=arguments;return e===n||"object"==typeof e?this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new i(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var n=t.data(this,"plugin_"+r);n instanceof i&&"function"==typeof n[e]&&n[e].apply(n,Array.prototype.slice.call(o,1)), "destroy"===e&&t.data(this,"plugin_"+r,null)}):void 0}, t[r]=function(){var o=t(e);return o.stellar.apply(o,Array.prototype.slice.call(arguments,0))}, t[r].scrollProperty=l, t[r].positionProperty=a, e.Stellar=i}(jQuery,this,document)